---
backend: cupy

# raw data source
raw_data:
  type: empad
  path: "~/Downloads/benchmark-sims/srtio3_10over_0.6fwhm/srtio3_10over_0.6fwhm_95.67_dstep0.6_x100_y100_4DSTEM.raw"
  diff_step: 0.6  # mrad/px
  kv: 300.        # keV

# initialization
init_probe:
  type: 'focused'
  conv_angle: 25  # mrad
  defocus: 100   # angstrom

init_object: 'random'

init_scan:
  type: 'raster'
  shape: [100, 100] # ny, nx
  step_size: 0.4  # angstrom

slices:
  n: 10
  total_thickness: 100

engines:
 - type: 'conventional'
   probe_modes: 4

   niter: 150
   grouping: 256

   update_probe: {after: 5}

   noise_model:
     type: 'anscombe'
     bias: 1.0e-3

   group_constraints: [
     'clamp_object_amplitude'
   ]
   iter_constraints: []

   solver:
     type: 'lsqml'
     beta_probe: 0.9
     beta_object: 0.9
     gamma: 1.0e-8

     illum_reg_object: 1.0e-2



